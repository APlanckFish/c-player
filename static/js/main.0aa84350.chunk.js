(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(t,e){t.exports="data:image/jpeg;base64,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"},154:function(t,e,i){t.exports=i.p+"static/media/video.f85ea331.mp4"},155:function(t,e,i){"use strict";i.r(e);var a=i(1),n=i.n(a),o=i(7),s=i.n(o),r=(i(90),i(91),i(21)),c=i(29),d=i(31),l=i(30),u=i(32),h=function(t){function e(t){var i;return Object(r.a)(this,e),(i=Object(d.a)(this,Object(l.a)(e).call(this,t))).video=void 0,i.onLoadStart=function(){i.props.handleOnLoadStart()},i.onLoadedMetaData=function(){if(i.video){var t={duration:i.video.duration,width:i.video.clientWidth,height:i.video.clientHeight};i.props.handleOnLoadedMetadata(t)}},i.onLoadedData=function(){i.props.handleOnLoadedData()},i.onWaiting=function(){i.props.handleOnWaiting()},i.onCanPlay=function(){i.props.handleOnCanPaly()},i.onError=function(){if(i.video){var t=i.video.error;t&&i.props.handleOnError(t)}},i.getBuffered=function(){if(i.video){var t=i.video.buffered,e=0;try{e=(1e3*(e=t.end(0)||0)+1)/1e3}catch(a){}return e}},i.getCurrentTime=function(){if(i.video)return i.video.currentTime},i.setCurrentTime=function(t){i.video&&(i.video.currentTime=t)},i.setLoop=function(t){i.video&&(i.video.loop=t)},i.setMuted=function(t){i.video&&(i.video.muted=t)},i.setVolume=function(t){i.video&&(i.video.volume=t)},i.play=function(){i.video&&i.video.play()},i.pause=function(){i.video&&i.video.pause()},i.video=null,i}return Object(u.a)(e,t),Object(c.a)(e,[{key:"shouldComponentUpdate",value:function(t){return t.src!==this.props.src}},{key:"render",value:function(){var t=this;return n.a.createElement("video",{className:"react-video",src:this.props.src,loop:this.props.loop,preload:this.props.preload,poster:this.props.poster,ref:function(e){return t.video=e},onCanPlay:this.onCanPlay,onError:this.onError,onLoadStart:this.onLoadStart,onLoadedMetadata:this.onLoadedMetaData,onLoadedData:this.onLoadedData,onWaiting:this.onWaiting})}}]),e}(a.Component);h.displayName="cPlayer",h.defaultProps={autoPlay:!1,preload:"auto",loop:!1,volume:.8,controls:!0};var v=function t(e,i){var a=this;Object(r.a)(this,t),this.canvas=void 0,this.ctx=void 0,this.duration=void 0,this.canvasWidth=void 0,this.canvasHeight=void 0,this.scale=void 0,this.danmus=void 0,this.col=void 0,this.colTop=void 0,this.cols=void 0,this.topCols=void 0,this.bottomCols=void 0,this.timer=void 0,this.draw=function(){console.log(a.danmus,"danmus"),a.timer||(a.timer=setInterval(function(){if(a.ctx){a.clearCanvas(),a.ctx.save();for(var t=a.danmus,e=0,i=t.length;e<i;e+=1)if(t[e].status){var n=t[e],o=n.content,s=n.x,r=n.y;switch(a.ctx.fillStyle=t[e].fontColor,a.ctx.font=a.getFont(t[e].fontSize),a.ctx.fillText(o,s,r),t[e].insert&&(a.ctx.strokeStyle="white",a.ctx.lineCap="square",a.ctx.beginPath(),a.ctx.moveTo(s,r+3),a.ctx.lineTo(s+t[e].textWidth/a.scale,r+3),a.ctx.stroke(),a.ctx.closePath()),t[e].model){case"roll":a.danmus[e].x=t[e].x-t[e].speed,t[e].x<=-t[e].textWidth&&(a.danmus[e].status=!1),t[e].x+t[e].textWidth<.8*a.canvas.width&&t[e].status&&(a.cols[t[e].col-1]=!0);break;case"top":a.danmus[e].current=a.danmus[e].current+30,t[e].current>=a.duration&&(a.danmus[e].status=!1,a.topCols[t[e].col-1]=!0);break;case"bottom":a.danmus[e].current=a.danmus[e].current+30,t[e].current>=a.duration&&(a.danmus[e].status=!1,a.bottomCols[a.bottomCols.length-t[e].col]=!0);break;default:a.danmus[e].x=t[e].x-t[e].speed,t[e].x<=-t[e].textWidth&&(a.danmus[e].status=!1),t[e].x+t[e].textWidth<a.canvasWidth-33&&t[e].status&&(a.cols[t[e].col-1]=!0)}}a.ctx.restore(),a.refreshDanmuku()}},30))},this.refreshDanmuku=function(){for(var t=0;t<a.danmus.length;t+=1)a.danmus[t].status||a.danmus.splice(t,1)},this.clearCanvas=function(){a.ctx&&a.ctx.clearRect(0,0,a.canvasWidth,a.canvasHeight)},this.fixCanvas=function(t){var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,o=i/n;if(i!==n){var s=t.width,r=t.height;t.width=s*o,t.height=r*o,a.canvasWidth=s*o,a.canvasHeight=s*o,t.style.width="".concat(s,"px"),t.style.height="".concat(r,"px"),e.scale(o,o)}a.scale=o},this.getFont=function(t){var e;switch(t){case"small":e="14";break;case"middle":e="20";break;case"large":e="26";break;default:e="20"}return"".concat(e,"px Arial normal")},this.addDanmuku=function(t){var e=t.map(function(t){return a.formatData(t,!1)});a.danmus=a.danmus.concat(e)},this.insertDanmuku=function(t){var e=a.formatData(t,!0);a.danmus.push(e)},this.stop=function(){a.timer&&clearInterval(a.timer),a.timer=null},this.formatData=function(t,e){var i,n=0,o=a.cols,s=a.topCols,r=a.bottomCols;if(a.ctx){a.ctx.font=a.getFont(t.fontSize);var c=a.scale,d=a.ctx.measureText(t.content).width*c;if(a.canvas.width,"roll"===t.model){for(var l=0;l<o.length;l+=1){if(o[l]){n=l+1,a.cols[l]=!1;break}if(l===o.length-1){var u=Math.random()*(a.col-1)+1;n=u,a.cols[u-1]=!1}}i=a.canvas.width/c}else if("top"===t.model){for(var h=0;h<s.length;h+=1){if(s[h]){n=h+1,a.topCols[h]=!1;break}if(h===s.length-1){var v=Math.random()*(a.col-1)+1;n=v,a.topCols[v-1]=!1}}i=(a.canvas.width-d)/2/c}else if("bottom"===t.model){for(var m=r.length,p=0;p<m;p+=1){if(r[p]){n=m-p,a.bottomCols[p]=!1;break}if(p===s.length-1){var A=Math.random()*(a.col-1)+1;n=A,a.bottomCols[A-1]=!1}}i=(a.canvas.width-d)/2/c}return Object.assign({},t,{x:i,y:30*n,textWidth:d,speed:5*Math.random()+1,insert:e,current:0,status:!0,col:n})}};var n=e;this.canvas=n;var o=this.canvas.getContext("2d");this.ctx=o,this.scale=0,this.fixCanvas(n),this.duration=i,this.clearCanvas(),this.danmus=[],this.col=Math.floor(n.height/30),this.colTop=2*this.col/3,this.cols=new Array(this.col).fill(!0),this.topCols=new Array(this.col).fill(!0),this.bottomCols=new Array(this.col).fill(!0);var s=n.parentNode;if(s){var c=s.clientWidth,d=s.clientHeight;this.canvasWidth=c,this.canvasHeight=d,n.width=c,n.height=d,n.style.width=c,n.style.height=d}},m=function(t){function e(t){var i;return Object(r.a)(this,e),(i=Object(d.a)(this,Object(l.a)(e).call(this,t))).canvas=void 0,i.dc=void 0,i.canvas=null,i.dc=null,i}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.canvas=document.querySelector("#canvas"),console.log(this.props,"props"),this.canvas&&(this.dc=new v(this.canvas,this.props.duration)),this.dc&&this.dc.draw()}},{key:"shouldComponentUpdate",value:function(t){return this.dc&&(this.dc.duration=t.duration,this.dc.canvasHeight=t.height,this.dc.canvasWidth=t.width),this.canvas&&(this.canvas.width=t.width,this.canvas.height=t.height),t.currentTime!==this.props.currentTime?(this.runDanmuku(),!0):t.playerAction!==this.props.playerAction&&(1===t.playerAction?this.drawDanmuku():2===t.playerAction&&this.stopDanmuku(),!0)}},{key:"runDanmuku",value:function(){var t=this.props,e=t.danmuku,i=t.playerAction,a=t.currentTime,n=t.loading;if(1===i&&!n){var o=e.filter(function(t){return Math.round(t.timePoint)===Math.round(a)});this.dc&&(this.dc.addDanmuku(o),this.dc.draw())}}},{key:"drawDanmuku",value:function(){var t=this.props,e=t.playerAction,i=t.loading;1!==e||i||this.dc&&this.dc.draw()}},{key:"stopDanmuku",value:function(){this.dc&&this.dc.stop()}},{key:"render",value:function(){var t=this;return a.createElement("canvas",{id:"canvas",className:"danmuView",ref:function(e){t.canvas=e},width:this.props.width,height:this.props.height})}}]),e}(a.Component);m.defaultProps={loading:!1};var p=m,A=(i(92),i(62)),f=i(83),g=function(t){function e(t){var i;return Object(r.a)(this,e),(i=Object(d.a)(this,Object(l.a)(e).call(this,t))).video=void 0,i.currentTimer=void 0,i.handleOnLoadedMetadata=function(t){i.state.video&&0===i.state.video.playTimes&&(i.setState({video:Object.assign(i.state.video,{duration:t.duration})}),console.log(i.state.video.duration,"duration")),i.setState({video:Object.assign(i.state.video,{width:t.width})}),i.setState({video:Object.assign(i.state.video,{height:t.height})})},i.handleOnEneded=function(){i.setState({playerStatus:3,playerAction:2})},i.startCurrentTimer=function(){i.currentTimer||(i.currentTimer=setInterval(function(){i.video&&i.setState({video:Object.assign(i.state.video,{currentTime:i.video.getCurrentTime()})}),i.setState({process:i.state.video.currentTime/i.state.video.duration*100})},1e3))},i.clearCurrentTimer=function(){i.currentTimer&&clearInterval(i.currentTimer),i.currentTimer=null},i.state={video:{playTimes:0,duration:0,currentTime:0,bufferedTime:0,muted:!1,width:480,height:360,volume:100},playerAction:0,playerStatus:0,canvas:null,duration:0,process:0,danmuInput:"",danmuku:[]},i.video=null,i.currentTimer=null,i}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.props.danmuku&&(this.setState({danmuku:this.props.danmuku}),console.log(this.state.danmuku,"danmuku"))}},{key:"play",value:function(){this.state.video;this.setState({playerAction:1}),this.video&&this.video.play(),this.startCurrentTimer()}},{key:"pause",value:function(){this.setState({playerAction:2}),this.video&&(this.video.pause(),this.clearCurrentTimer())}},{key:"fullScreen",value:function(){}},{key:"handleOnLoadStart",value:function(){}},{key:"handleOnLoadedData",value:function(){}},{key:"handleOnCanPaly",value:function(){}},{key:"handleOnWaiting",value:function(){}},{key:"handleOnError",value:function(){}},{key:"setCurrentTime",value:function(t){this.setState({playerAction:3,video:Object.assign(this.state.video,{currentTime:t})}),this.video&&this.video.setCurrentTime(t),this.setState({playerAction:1})}},{key:"formatTime",value:function(t){var e="";if(t>-1){var i=Math.floor(t/60)%60,a=t%60;i<10&&(e+="0"),e+=i+":",a<10&&(e+="0"),e+=Math.floor(a)}return e}},{key:"handleSliderChange",value:function(t){var e=t/100*this.state.video.duration;this.video&&this.video.setCurrentTime(e),this.setState({video:Object.assign(this.state.video,{currentTime:e}),process:t})}},{key:"changeInput",value:function(t){this.setState({danmuInput:t.target.value})}},{key:"changeVolume",value:function(t){this.setState({video:Object.assign(this.state.video,{volume:t})}),this.video&&this.video.setVolume(t/100),console.log(this.state.video.volume,"volume")}},{key:"sendDanmu",value:function(){console.log(this.state.danmuInput,"danmu");var t={content:this.state.danmuInput,date:new Date,timePoint:this.state.video.currentTime+.5,fontSize:"middle",fontColor:"white",model:"roll"},e=this.state.danmuku;e.push(t),this.setState({danmuku:e,danmuInput:""})}},{key:"render",value:function(){var t=this;return a.createElement("div",{className:"videoView"},a.createElement(h,{handleOnLoadedMetadata:this.handleOnLoadedMetadata,src:this.props.src,poster:this.props.poster,handleOnLoadStart:this.handleOnLoadStart,handleOnLoadedData:this.handleOnLoadedData,handleOnCanPaly:this.handleOnCanPaly,handleOnWaiting:this.handleOnWaiting,handleOnError:this.handleOnError,ref:function(e){t.video=e}}),a.createElement("div",{className:"processDiv"},a.createElement("div",{className:"processBack"}),a.createElement(A.a,{value:this.state.process,onChange:this.handleSliderChange.bind(this),min:0,max:100,className:"processSlider"})),a.createElement("div",{className:"controlBar"},1==this.state.playerAction?a.createElement("i",{className:"icon-zanting iconfont",onClick:this.pause.bind(this)}):a.createElement("i",{className:"icon-play iconfont",onClick:this.play.bind(this)}),a.createElement("div",{className:"currentTime"},this.formatTime(this.state.video.currentTime),"/"),a.createElement("div",{className:"duration"},this.formatTime(this.state.video.duration)),a.createElement(f.a,{placeholder:"\u53d1\u4e2a\u5f39\u5e55\u5410\u69fd\u5427\uff01",className:"danmuInput",value:this.state.danmuInput,onChange:this.changeInput.bind(this),onPressEnter:this.sendDanmu.bind(this)}),a.createElement("div",{className:"voiceDiv"},a.createElement("i",{className:"iconfont icon-yinliang"}),a.createElement(A.a,{vertical:!0,value:this.state.video.volume,onChange:this.changeVolume.bind(this),className:"voiceSlider"}),a.createElement("div",{className:"voiceBack"}))),a.createElement(p,{currentTime:this.state.video.currentTime,duration:this.state.video.duration,playerAction:this.state.playerAction,width:this.state.video.width,height:this.state.video.height,danmuku:this.state.danmuku}))}}]),e}(a.Component);g.defaultProps={height:360,width:480,controls:!1};var E,x=g,b=i(153),y=i(154);E=[],function(){for(var t=0;t<100;t++){var e=Math.random(),i={content:"\u6d4b\u8bd5\u5f39\u5e55",date:new Date,timePoint:10*e,fontSize:"middle",fontColor:"white",model:"roll"};e<.5&&(i.model="top"),i.fontColor="#"+Math.floor(16777215*e).toString(16),E.push(i)}}();var C=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"title"},"C-player"),n.a.createElement("div",{className:"subTitle"},"\u4e00\u4e2a\u57fa\u4e8etypescript\u7684\u5f39\u5e55\u64ad\u653e\u5668"),n.a.createElement("header",{className:"App-header"},n.a.createElement(x,{src:y,poster:b,danmuku:E})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},85:function(t,e,i){t.exports=i(155)},90:function(t,e,i){},91:function(t,e,i){},92:function(t,e,i){}},[[85,1,2]]]);
//# sourceMappingURL=main.0aa84350.chunk.js.map